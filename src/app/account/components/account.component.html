<div class="account-app">
  <div class="header-section">
    <h1 class="app-title">Bank Accounts</h1>
    <button class="add-btn" (click)="showAddDialog = true">
      <span class="btn-icon">+</span>
      Add Account
    </button>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    <span class="error-icon">⚠️</span>
    {{ errorMessage }}
  </div>

  <!-- Empty State -->
  <div *ngIf="accounts.length === 0" class="no-accounts">
    <div class="empty-state">
      <div class="empty-icon">🏦</div>
      <h3>No accounts yet</h3>
      <p>Start by adding your first bank account above!</p>
    </div>
  </div>

  <!-- Accounts List -->
  <div class="accounts-container" *ngIf="accounts.length > 0">
    <div *ngFor="let account of accounts" class="account-card">
      <div class="account-content">
        <div class="account-left">
          <div class="account-icon">🏦</div>
          <div class="account-details">
            <h4 class="account-name">{{ account.name }}</h4>
            <p class="account-type">Bank Account</p>
          </div>
        </div>
        <div class="account-right">
          <div class="account-balance">
            {{ account.balance | currency }}
          </div>
          <button class="btn-edit" (click)="openEditDialog(account)">Edit</button>
          <button class="btn-delete" (click)="openDeleteDialog(account.name)">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Account Modal -->
  <div *ngIf="showAddDialog" class="transaction-overlay" (click)="onCloseAddAccount()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">🏦 Add Account</h2>
        <button type="button" class="close-btn" (click)="onCloseAddAccount()">×</button>
      </div>

      <div class="modal-body">
        <form (ngSubmit)="addAccount()" class="transaction-form">
          <div class="form-group">
            <label for="name" class="form-label">
              <span class="label-icon">🏷️</span>
              Account Name
            </label>
            <input
              type="text"
              id="account-name"
              name="name"
              class="form-control"
              placeholder="e.g., Checking Account, Savings"
              [(ngModel)]="newAccount.name"
              required
            />
          </div>

          <div class="form-group">
            <label for="balance" class="form-label">
              <span class="label-icon">💵</span>
              Initial Balance
            </label>
            <div class="amount-input-wrapper">
              <span class="currency-symbol">$</span>
              <input
                type="number"
                id="account-balance"
                name="balance"
                class="form-control amount-input"
                placeholder="0.00"
                step="0.01"
                [(ngModel)]="newAccount.balance"
                required
              />
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-cancel" (click)="onCloseAddAccount()">Cancel</button>
            <button type="submit" class="btn btn-primary">🏦 Create Account</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Edit Account Modal -->
  <div *ngIf="showEditDialog" class="transaction-overlay" (click)="onCloseEditDialog()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">✏️ Edit Account</h2>
        <button type="button" class="close-btn" (click)="onCloseEditDialog()">×</button>
      </div>

      <div class="modal-body">
        <form (ngSubmit)="editAccount()" class="transaction-form">
          <div class="form-group">
            <label for="editName" class="form-label">
              <span class="label-icon">🏷️</span>
              Account Name
            </label>
            <input
              type="text"
              id="editName"
              name="editName"
              class="form-control"
              [value]="editingAccount.name"
              readonly
            />
          </div>

          <div class="form-group">
            <label for="editBalance" class="form-label">
              <span class="label-icon">💵</span>
              Balance
            </label>
            <div class="amount-input-wrapper">
              <span class="currency-symbol">$</span>
              <input
                type="number"
                id="editBalance"
                name="editBalance"
                class="form-control amount-input"
                placeholder="0.00"
                step="0.01"
                [(ngModel)]="editingAccount.balance"
                required
              />
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-cancel" (click)="onCloseEditDialog()">Cancel</button>
            <button type="submit" class="btn btn-primary">💾 Update Account</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="showDeleteDialog" class="transaction-overlay" (click)="onCloseDeleteDialog()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">🗑️ Delete Account</h2>
        <button type="button" class="close-btn" (click)="onCloseDeleteDialog()">×</button>
      </div>

      <div class="modal-body">
        <div class="delete-confirmation">
          <div class="warning-icon">⚠️</div>
          <h3>Are you sure?</h3>
          <p>This action cannot be undone. The account will be permanently deleted.</p>
          
          <div class="form-actions">
            <button type="button" class="btn btn-cancel" (click)="onCloseDeleteDialog()">Cancel</button>
            <button type="button" class="btn-delete" (click)="deleteAccount()">🗑️ Delete Account</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
